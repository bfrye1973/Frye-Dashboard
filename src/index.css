/* =========================================================
   Frye Dashboard â€” CLEAN BASE
   ========================================================= */

/* ---------- Zoom/scale hardeners (safe defaults) ---------- */
html, body {
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}
html { zoom: 1 !important; }      /* ignored by Firefox */

/* ---------- Theme tokens ---------- */
:root{
  --bg:#0d1117;
  --panel:#0e1526;
  --border:#1f2a44;
  --text:#e5e7eb;
  --muted:#9ca3af;

  --ok:#22c55e;
  --warn:#f59e0b;
  --danger:#ef4444;
  --info:#3b82f6;
}

/* ---------- Base ---------- */
*{ box-sizing:border-box; }
html, body, #root{
  height:100%; width:100%; margin:0; padding:0;
  background:var(--bg); color:var(--text);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
}
img, canvas, svg, video{ max-width:100%; display:block; height:auto; }
a{ color:var(--info); text-decoration:none; } a:hover{text-decoration:underline;}
button{ font:inherit; color:inherit; background:transparent; border:1px solid var(--border); padding:6px 10px; border-radius:6px; cursor:pointer; }

/* ---------- Panels / layout ---------- */
.panel{
  background:var(--panel); border:1px solid var(--border);
  border-radius:12px; padding:10px;
}
.panel-head{ display:flex; align-items:center; gap:8px; padding:8px 10px; border-bottom:1px solid var(--border); background:#0c1320; }
.panel-title{ font-weight:700; }
.spacer{ flex:1; }
.muted{ opacity:.8; } .small{ font-size:12px; }

/* =========================================================
   KPI / Tiles / Meter
   ========================================================= */
.kpi-bar{ position:relative; height:8px; border:1px solid #334155; background:#0b1220; border-radius:6px; overflow:hidden; }
.kpi-fill{ position:absolute; left:0; top:0; bottom:0; border-radius:6px; }
.kpi-bar.ok    .kpi-fill{ background:var(--ok); }
.kpi-bar.warn  .kpi-fill{ background:var(--warn); }
.kpi-bar.danger .kpi-fill{ background:var(--danger); }

/* delta chips */
.delta{ font-weight:700; padding:2px 6px; border-radius:8px; border:1px solid transparent; }
.delta-up{   color:#16a34a; border-color:#14532d; background:#052e1b; }
.delta-down{ color:#ef4444; border-color:#7f1d1d; background:#3a0e0e; }
.delta-flat{ color:#93c5fd; border-color:#334155; background:#0b1220; }

/* Optional row outlines for debugging */
#row-1,#row-2,#row-3,#row-4,#row-5,#row-5-controls,#row-6,#row-7{
  outline:1px dotted rgba(100,150,255,.25); margin-bottom:8px;
}

/* =========================================================
   CHART QUARANTINE (one definitive copy)
   - Keeps any chart canvas inside its card
   - Prevents full-page overlays
   ========================================================= */

/* Content rows should always sit above canvases */
.panel, .cluster, .index-sectors, .strategies, .journal, .kpi-area, .bottom-grid{
  position:relative; z-index:2;
}

/* Chart card wrapper for every chart section (e.g., Row 6) */
.chart-card{
  position:relative;
  height:520px;                 /* adjust if you want taller/shorter */
  overflow:hidden;              /* CRITICAL: clips runaway canvases */
  z-index:1;
}

/* The inner mount node for the chart library */
.chart-card > .chart-root{
  position:relative; width:100%; height:100%;
}

/* Confine canvases/roots inside the card */
.chart-card > .chart-root,
.chart-card canvas,
.chart-card .tv-lightweight-charts,
.chart-card .tradingview-widget-container,
.chart-card .lw-chart,
.chart-card .chart-canvas{
  position:absolute !important;
  inset:0 !important;           /* fill the card; padding handled in JSX if needed */
  z-index:1;
}

/* TEMP safety: demote any full-screen canvases mounted at <body> level */
body > canvas,
body > .tv-lightweight-charts,
body > .tradingview-widget-container,
body > div[style*="position:fixed"],
body > div[style*="position: absolute"][style*="top: 0"][style*="left: 0"][style*="right: 0"][style*="bottom: 0"]{
  z-index:0 !important; pointer-events:none !important;
  /* If you still see a black sheet, uncomment the next line for a hard hide:
     display:none !important;
  */
}

/* Avoid 100vh traps from 3rd-party widgets */
div[style*="min-height: 100vh"], div[style*="height: 100vh"]{
  min-height:auto !important; height:auto !important; max-height:92vh !important; overflow:hidden !important;
}
